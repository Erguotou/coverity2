language: c
script: if [ "${COVERITY_SCAN_BRANCH}" != 1 ]; then make -C Debug ; fi

env:
  global:
   # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
   #   via the "travis encrypt" command using the project repo's public key
   - secure: "FQARAWi2OGzqcRwSrmsxB3Nq0CrPamx8zL5gKiLsvzZ617FvbrvNR3poQw4fNtmxz1iJ7GLUz+OqJYwrHBjnSoXVWNMQBSPsr2ZnOG0Z+4qt6TcXiajfJjf0KYaJaY2Avnfyyjz+1NnLmTwMtszSxqxLx9SfZall0Kcz2dLfohwDuDCv6EU3+xRZV23XS8LJ2XSKTiJ9VDHuLzxkWQ7usunJPAoO/XVOcn995tPRkwARDIrNnsMUiE6LtuquNlO/FwFpMEeqRFtm7rB3nFASEi2H6WuNv0lbo71hXC5WDrVoX53M4q0Qfwbriy/blG6ud1fJpAeJuzyeatlLNKR5GMhyLP70Ad6auRt3EG/AzEJiWTCVJg3P3oGGc1zOP6xbApxbQFMwizO9KL+Qmxz9TPEW4pZNe+le67fre4022LfonaAU5d/vTlwNBnL2bYUDcv3si/imM8B9wzzLY4tORCRMA6HBcWMHLRSK1oxB6kSfMzzoSusS9VQZEO3JCphQ2ktu5Nnj/2T1d9iyAdNEncpenT9s2pn+am4SASKO/TCEUGy67YUsUHsGZ4JDRiARfnKaHF5/STFPdZP+bCT+yev7tdW+UtzHC8Pft/kFNjzjqjWD0MkvFnWYmZSTHm8DSZEy85My4guI1vsrR7HHSf43QeOE/qjFPURHwfqKHRQ="
 
before_install:
  - echo -n | openssl s_client -connect scan.coverity.com:443 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' | sudo tee -a /etc/ssl/certs/ca-

addons:
  coverity_scan:
    project:
      name: "Erguotou/coverity2"
      description: "Coverity playground"
    notification_email: jeromeliang@hotmail.com
    build_command_prepend: "make -C Debug"
    build_command: "make -C Debug"
    branch_pattern: coverity_scan